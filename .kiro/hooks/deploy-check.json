{
  "name": "Pre-deployment Validation",
  "version": "1.0.0",
  "description": "Comprehensive validation checks before production deployment to ensure system readiness and prevent deployment issues",
  "when": {
    "type": "userTriggered"
  },
  "then": {
    "type": "askAgent",
    "prompt": "I'm preparing for a production deployment. Please run comprehensive pre-deployment validation checks:\n\n## ğŸ” **SYSTEM VALIDATION**\n1. **Health Checks**: Verify all services are healthy (`npm run health:check`)\n2. **Database Status**: Check PostgreSQL, MongoDB, and Redis connectivity\n3. **Migration Status**: Ensure all database migrations are applied (`npm run migrate:status`)\n4. **Environment Config**: Validate all required environment variables are set\n\n## ğŸ§ª **QUALITY ASSURANCE**\n1. **Test Suite**: Run complete test suite (`npm run test`)\n2. **Coverage Check**: Ensure test coverage meets 85% threshold (`npm run test:coverage`)\n3. **Performance Tests**: Run load tests (`npm run performance:test`)\n4. **Security Scan**: Check for vulnerabilities in dependencies\n\n## ğŸ—ï¸ **BUILD VALIDATION**\n1. **TypeScript Compilation**: Ensure clean build (`npm run build`)\n2. **Docker Build**: Verify production Docker image builds successfully\n3. **Static Analysis**: Run linting and code quality checks (`npm run lint`)\n4. **Bundle Analysis**: Check for any build warnings or errors\n\n## ğŸ” **SECURITY CHECKS**\n1. **Authentication**: Verify JWT configuration and secrets\n2. **Payment Gateway**: Test Razorpay integration and webhook endpoints\n3. **Rate Limiting**: Confirm rate limiting is properly configured\n4. **CORS Settings**: Validate cross-origin configuration\n\n## ğŸŒ **EXTERNAL SERVICES**\n1. **BHASHINI API**: Test translation service connectivity\n2. **TTS Services**: Verify voice processing endpoints\n3. **Database Connections**: Test all database cluster connections\n4. **Redis Cache**: Confirm caching layer functionality\n\n## ğŸ“Š **DEPLOYMENT READINESS**\n1. **Backup Verification**: Ensure backup procedures are in place\n2. **Rollback Plan**: Confirm rollback procedures are ready\n3. **Monitoring Setup**: Verify logging and monitoring configuration\n4. **SSL Certificates**: Check certificate validity and expiration\n\nFor each check:\n- âœ… Report success status\n- âŒ Identify any issues and provide specific remediation steps\n- âš ï¸ Highlight warnings that need attention\n- ğŸ“‹ Provide deployment readiness summary\n\n**Focus Areas for VyaparMitra**:\n- Payment processing security and functionality\n- Voice commerce pipeline readiness\n- Multi-language translation accuracy\n- Real-time negotiation system stability\n- Database transaction integrity\n\nProvide a comprehensive GO/NO-GO recommendation for production deployment."
  }
}